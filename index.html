<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monkey Web App</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* === –í–∞—à–∏ CSS —Å—Ç–∏–ª–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #0e0e0e;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
        }

        /* –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ö–µ–¥–µ—Ä */
        .header {
            background-color: #1c1c1c;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #2a2a2a;
            transition: background-color 0.3s;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-title img {
            width: 30px;
            height: 30px;
        }

        .header-title h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover; /* –ß—Ç–æ–±—ã –∞–≤–∞—Ç–∞—Ä –Ω–µ –∏—Å–∫–∞–∂–∞–ª—Å—è */
        }

        .user-info .nickname {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .user-info .nickname span {
            font-size: 16px;
            color: #fff;
        }

        .user-info .nickname .balance {
            font-size: 16px;
            color: #323234; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .main-page {
            display: block; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é */
        }

        .intro-text {
            margin-bottom: 16px;
        }

        .intro-text h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .intro-text p {
            font-size: 16px;
            color: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            margin-bottom: 16px;
        }

        .section {
            margin-bottom: 16px;
            background-color: #1c1c1c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .section-title span {
            font-size: 16px;
            font-weight: 500;
        }

        .section-title-subtext {
            font-size: 16px;
            color: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            margin-bottom: 10px;
        }

        .start-button {
            background-color: #9755fd; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            color: #fff; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: none;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .tools-section h3 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .tools-section p {
            font-size: 16px;
            color: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            margin-bottom: 16px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .tool-button {
            background-color: #1c1c1c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: 1px solid #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-align: center;
            min-height: 120px;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .tool-button:hover {
             /* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
             background-color: #2a2a2a;
        }

        .tool-button .icons {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 60px;
            /* –ü—Ä–∏–º–µ—Ä –∏–∫–æ–Ω–∫–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º) */
            /* background: url('path/to/icon.svg') no-repeat center center; */
            /* background-size: contain; */
        }

        .tool-button .divider {
            width: 100%;
            height: 1px;
            background-color: #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            margin: 10px 0;
        }

        .tool-button .tool-name {
            font-size: 14px;
            font-weight: 500;
            padding: 5px 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ */
        .converter-page {
            display: none; /* –°–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }

        .converter-page .section-number {
            width: 24px; /* –ß—É—Ç—å –±–æ–ª—å—à–µ */
            height: 24px;
            background-color: #35274a;
            color: #9755fd; /* –°–¥–µ–ª–∞–µ–º —Ü–≤–µ—Ç –Ω–æ–º–µ—Ä–∞ —è—Ä—á–µ */
            border: 1px solid #5c3a91;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ –¥–ª—è –∫—Ä—É–≥–ª–æ–≥–æ */
            font-weight: 600;
            flex-shrink: 0; /* –ß—Ç–æ–±—ã –Ω–µ —Å–∂–∏–º–∞–ª—Å—è */
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ */
            gap: 10px;
        }

        .button {
            background-color: #323234; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: 1px solid #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border-radius: 10px;
            padding: 8px; /* –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –ø–∞–¥–¥–∏–Ω–≥ */
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .button.selected {
            background-color: #35274a; /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
            border-color: #9755fd; /* –Ø—Ä–∫–∞—è —Ä–∞–º–∫–∞ */
        }
        .button.selected span {
            font-weight: 600; /* –í—ã–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç */
        }


        .button img {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            object-fit: cover;
        }

        .button span {
            font-size: 14px; /* –ù–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ */
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; /* –û–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π */
        }

        .format-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .format-options-row {
            display: flex;
            flex-direction: row;
            gap: 10px;
        }

        .format-button {
            padding: 12px 10px; /* –£–≤–µ–ª–∏—á–∏–º –ø–∞–¥–¥–∏–Ω–≥ */
            background-color: #323234; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: 1px solid #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border-radius: 10px;
            text-align: center;
            font-size: 14px; /* –£–º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç */
            cursor: pointer;
            color: #fff; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            flex: 1;
             transition: background-color 0.2s, border-color 0.2s;
        }

        .format-button.clear {
            background-color: #444; /* –¢–µ–º–Ω–µ–µ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ */
            box-shadow: none;
            color: #ccc;
        }
         .format-button.clear:hover {
            background-color: #555;
        }


        .format-button.add-file {
            background-color: #9755fd; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: none;
            font-weight: 600;
        }
         .format-button.add-file:hover:not(.disabled) {
            filter: brightness(1.1);
         }


        .format-button.add-file.disabled {
            background-color: #4d3275; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            color: #706d76; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            cursor: not-allowed;
             filter: none; /* –£–±–∏—Ä–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã */
        }

        .format-button.selected {
            background-color: #35274a; /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
            border-color: #9755fd; /* –Ø—Ä–∫–∞—è —Ä–∞–º–∫–∞ */
            font-weight: 600;
        }

        .convert-button {
            background-color: #9755fd; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            color: #fff; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            border: none;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px; /* –ë–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
            margin-bottom: 10px;
             transition: background-color 0.2s, color 0.2s, filter 0.2s;
        }
         .convert-button:hover:not(.disabled) {
            filter: brightness(1.1);
         }

        .convert-button.disabled {
            background-color: #4d3275; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            color: #706d76; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            cursor: not-allowed;
            filter: none; /* –£–±–∏—Ä–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" */
        .update-page {
            display: none; /* –°–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            flex-grow: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ */
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 20px; /* –ü–æ–º–µ–Ω—å—à–µ */
            color: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            padding: 20px;
        }

        /* –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ñ—É—Ç–µ—Ä */
        .footer {
            background-color: #1c1c1c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            padding: 10px;
            display: flex;
            justify-content: space-around;
            position: sticky;
            bottom: 0;
            z-index: 100;
            border-top: 1px solid #2a2a2a; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            transition: background-color 0.3s;
        }

        .footer-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            cursor: pointer;
            transition: color 0.2s;
            padding: 5px 10px; /* –î–æ–±–∞–≤–∏–º –ø–∞–¥–¥–∏–Ω–≥ */
            border-radius: 8px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ */
        }
        .footer-btn:hover {
            background-color: rgba(255, 255, 255, 0.05); /* –õ–µ–≥–∫–∏–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .footer-btn svg {
            fill: #4c4c4c; /* –ë—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–µ–º–æ–π */
            transition: fill 0.2s;
            margin-bottom: 4px; /* –û—Ç—Å—Ç—É–ø –æ—Ç —Ç–µ–∫—Å—Ç–∞ */
        }

        .footer-btn.selected {
            color: #9755fd; /* –Ø—Ä–∫–∏–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π */
        }
        .footer-btn.selected:hover {
             background-color: transparent; /* –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é */
        }

        .footer-btn.selected svg {
            fill: #9755fd; /* –Ø—Ä–∫–∏–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏ */
        }

        .footer-btn span {
            font-size: 11px; /* –ú–µ–Ω—å—à–µ —à—Ä–∏—Ñ—Ç –≤ —Ñ—É—Ç–µ—Ä–µ */
        }
    </style>
</head>

<body>
    <!-- –•–µ–¥–µ—Ä -->
    <header class="header">
        <div class="header-title">
            <img src="https://i.ibb.co/TDZdpLkx/d092776e-b9cf-472a-9373-bd4ea85d76e4.jpg" alt="Monkey Logo">
            <h1>Monkey</h1>
        </div>
        <div class="user-info">
            <div class="nickname">
                <span class="username">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                <span class="balance">$0</span> <!-- –ë–∞–ª–∞–Ω—Å –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è -->
            </div>
            <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∞–≤–∞—Ç–∞—Ä–∫—É, JS –∑–∞–º–µ–Ω–∏—Ç –µ—Å–ª–∏ –µ—Å—Ç—å -->
            <img src="https://via.placeholder.com/32/000000/FFFFFF/?text=U" alt="User Avatar" class="user-avatar">
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div class="main-page" id="main-page">
            <div class="intro-text">
                <h2 id="welcome-text">üëãüèª –ü—Ä–∏–≤–µ—Ç!</h2>
                <p>–ó–∞–≥—Ä—É–∑–∏ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã</p>
            </div>

            <section class="section">
                <div class="section-title">
                    <span>ü™Ñ –ú–∞–≥–∏—è –æ—Ç Monkey (–°–∫–æ—Ä–æ)</span>
                </div>
                <div class="section-title-subtext">–ß–µ–∫–µ—Ä –∏ –∫–æ–¥ —Å –ø–æ—á—Ç—ã –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º</div>
                <button class="start-button" disabled>–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É (–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ)</button>
            </section>

            <div class="tools-section">
                <h3>üí° –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
                <p>–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π —Ç–µ–±–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</p>
                <div class="tools-grid">
                    <div class="tool-button" data-page="converter-page">
                        <div class="icons" style="font-size: 30px;">üìù</div> <!-- –≠–º–æ–¥–∑–∏ –∫–∞–∫ –∏–∫–æ–Ω–∫–∞ -->
                        <div class="divider"></div>
                        <div class="tool-name">–ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons" style="font-size: 30px;">üî¶</div>
                        <div class="divider"></div>
                        <div class="tool-name">–ß–µ–∫–µ—Ä –∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                         <div class="icons" style="font-size: 30px;">üé¨</div>
                        <div class="divider"></div>
                        <div class="tool-name">–°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–µ–æ</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                         <div class="icons" style="font-size: 30px;">ü™Ñ</div>
                        <div class="divider"></div>
                        <div class="tool-name">–£–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                         <div class="icons" style="font-size: 30px;">‚úâÔ∏è</div>
                        <div class="divider"></div>
                        <div class="tool-name">–ö–æ–¥ —Å –ø–æ—á—Ç—ã</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                         <div class="icons" style="font-size: 30px;">üõí</div>
                        <div class="divider"></div>
                        <div class="tool-name">–ú–∞–≥–∞–∑–∏–Ω</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ -->
        <div class="converter-page" id="converter-page">
            <div class="intro-text">
                <h2>üìù –ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä</h2>
                <p>–ò–∑–º–µ–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤–∞—à–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤</p>
            </div>

            <section class="section">
                <div class="section-title">
                    <div class="section-number">1</div>
                    <span>–í–∞—à–∏ –∞–∫–∫–∞—É–Ω—Ç—ã</span>
                </div>
                <div class="section-title-subtext" id="file-info">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
                <div class="format-options-row">
                    <button class="format-button clear">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="format-button add-file">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª</button>
                </div>
            </section>

            <section class="section">
                <div class="section-title">
                    <div class="section-number">2</div>
                    <span>–ü–æ—Å—Ç–∞–≤—â–∏–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤</span>
                </div>
                <div class="section-title-subtext">–ì–¥–µ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–ª–∏—Å—å –∞–∫–∫–∞—É–Ω—Ç—ã?</div>
                <div class="button-grid">
                    <!-- –ö–Ω–æ–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ HTML) -->
                    <div class="button" data-shop="Chivap Shop">
                        <img src="https://i.ibb.co/pBx3SxhX/9eeca0f4-7434-4f5c-8a4e-287dceeec8e7.jpg" alt="Chivap">
                        <span>Chivap</span> <!-- –ö–æ—Ä–æ—á–µ –Ω–∞–∑–≤–∞–Ω–∏–µ -->
                    </div>
                    <div class="button selected" data-shop="Grom Shop"> <!-- Grom –≤—ã–±—Ä–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                        <img src="https://i.ibb.co/sJNc1q7Q/0cf68078-16a5-4851-a0b5-feb5297ac470.jpg" alt="Grom">
                        <span>Grom</span>
                    </div>
                    <div class="button" data-shop="Proliv Shop">
                        <img src="https://i.ibb.co/wZskwNp2/d6c8a7f3-01c8-4f62-aa35-f0072beb4665.jpg" alt="Proliv">
                        <span>Proliv</span>
                    </div>
                    <div class="button" data-shop="Muted Shop">
                        <img src="https://i.ibb.co/4CLYSX0/be105773-907f-44a3-bda1-1d0115d50b3d.jpg" alt="Muted">
                        <span>Muted</span>
                    </div>
                    <div class="button" data-shop="Boom Store">
                        <img src="https://i.ibb.co/Y4dkrsbh/85f727a3-b507-4d54-9d93-751ecb26ddba.jpg" alt="Boom">
                        <span>Boom</span>
                    </div>
                    <div class="button" data-shop="Meta Store">
                        <img src="https://i.ibb.co/xtHwB1RS/641c7bb7-fd80-4cde-bf28-00b62aa84cf8.jpg" alt="Meta">
                        <span>Meta</span>
                    </div>
                    <div class="button" data-shop="Inferno Shop">
                        <img src="https://i.ibb.co/xtHwB1RS/641c7bb7-fd80-4cde-bf28-00b62aa84cf8.jpg" alt="Inferno"> <!-- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –∏–∫–æ–Ω–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å -->
                        <span>Inferno</span>
                    </div>
                    <div class="button" data-shop="Monkey Shop">
                        <img src="https://i.ibb.co/21SH4XQh/599c5190-3a26-4c31-82c0-6935b28dcd97.jpg" alt="Monkey">
                        <span>Monkey</span>
                    </div>
                     <div class="button" data-shop="–î—Ä—É–≥–æ–π"> <!-- –û–ø—Ü–∏—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ -->
                        <img src="https://via.placeholder.com/32/cccccc/000000?text=?" alt="Other">
                        <span>–î—Ä—É–≥–æ–π</span>
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="section-title">
                    <div class="section-number">3</div>
                    <span>–í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞</span>
                </div>
                <div class="section-title-subtext">–í –∫–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å?</div>
                <div class="format-options">
                    <!-- –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ HTML) -->
                    <button class="format-button" data-format="@username">@username</button>
                    <button class="format-button" data-format="mail:mailpass">mail:mailpass</button>
                    <button class="format-button" data-format="log:pass">log:pass</button>
                    <button class="format-button" data-format="replace_colon_to_pipe">–ó–∞–º–µ–Ω–∞ ':' –Ω–∞ '|'</button>
                    <button class="format-button" data-format="replace_pipe_to_colon">–ó–∞–º–µ–Ω–∞ '|' –Ω–∞ ':'</button>
                </div>
            </section>

            <button class="convert-button disabled" disabled>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" -->
        <div class="update-page" id="update-page">
            <div>üõ†Ô∏è –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.<br>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã!</div>
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <div class="footer-btn selected" data-page="main-page"> <!-- –ì–ª–∞–≤–Ω–∞—è –≤—ã–±—Ä–∞–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
            <svg width="28" height="27" viewBox="0 0 28 27"> <path d="M10.6045 3.41309H6.2054C5.62204 3.41309 5.06258 3.64482 4.65009 4.05732C4.2376 4.46981 4.00586 5.02927 4.00586 5.61262V10.0117M10.6045 3.41309H21.6022C22.1855 3.41309 22.745 3.64482 23.1575 4.05732C23.57 4.46981 23.8017 5.02927 23.8017 5.61262V10.0117M10.6045 3.41309V23.2089M4.00586 10.0117V21.0094C4.00586 21.5927 4.2376 22.1522 4.65009 22.5647C5.06258 22.9772 5.62204 23.2089 6.2054 23.2089H10.6045M4.00586 10.0117H23.8017M23.8017 10.0117V21.0094C23.8017 21.5927 23.57 22.1522 23.1575 22.5647C22.745 22.9772 22.1855 23.2089 21.6022 23.2089H10.6045" stroke="currentColor" stroke-width="1.09977" stroke-linecap="round" stroke-linejoin="round" /> </svg>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="footer-btn" data-page="update-page"> <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" -->
            <svg width="27" height="27" viewBox="0 0 27 27"> <path d="M18.6929 23.0913V20.8922C18.6929 19.7256 18.2295 18.6069 17.4047 17.7821C16.5799 16.9572 15.4611 16.4938 14.2946 16.4938H5.49794C4.33143 16.4938 3.2127 16.9572 2.38785 17.7821C1.563 18.6069 1.09961 19.7256 1.09961 20.8922V23.0913M25.2904 23.0913V20.8922C25.2897 19.9176 24.9654 18.9709 24.3683 18.2007C23.7712 17.4305 22.9353 16.8804 21.9917 16.6368M17.5934 3.44177C18.5395 3.68401 19.378 4.23424 19.9769 5.00572C20.5757 5.7772 20.9007 6.72604 20.9007 7.70266C20.9007 8.67928 20.5757 9.62812 19.9769 10.3996C19.378 11.1711 18.5395 11.7213 17.5934 11.9635M14.2946 7.69716C14.2946 10.1263 12.3254 12.0955 9.89628 12.0955C7.46714 12.0955 5.49794 10.1263 5.49794 7.69716C5.49794 5.26803 7.46714 3.29883 9.89628 3.29883C12.3254 3.29883 14.2946 5.26803 14.2946 7.69716Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /> </svg>
            <span>–ê–∫–∫–∞—É–Ω—Ç—ã</span>
        </div>
        <div class="footer-btn" data-page="update-page"> <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" -->
             <svg width="27" height="27" viewBox="0 0 27 27"> <path d="M5.49799 23.0913H20.8922C22.1067 23.0913 23.0913 22.1067 23.0913 20.8922V5.49799C23.0913 4.28343 22.1067 3.29883 20.8922 3.29883H5.49799C4.28343 3.29883 3.29883 4.28343 3.29883 5.49799V20.8922C3.29883 22.1067 4.28343 23.0913 5.49799 23.0913ZM5.49799 23.0913L17.5934 10.9959L23.0913 16.4938M10.9959 9.34654C10.9959 10.2575 10.2575 10.9959 9.34654 10.9959C8.43561 10.9959 7.69716 10.2575 7.69716 9.34654C7.69716 8.43561 8.43561 7.69716 9.34654 7.69716C10.2575 7.69716 10.9959 8.43561 10.9959 9.34654Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /> </svg>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        console.log("WebApp initialized:", tg);
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SDK
        if (!tg || !tg.initDataUnsafe) {
            console.error("Telegram WebApp SDK not loaded or initData is missing!");
            // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            document.body.innerHTML = '<div style="color: red; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.</div>';
        }

        tg.ready(); // –°–æ–æ–±—â–∞–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

        // --- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã ---
        const mainPage = document.getElementById('main-page');
        const converterPage = document.getElementById('converter-page');
        const updatePage = document.getElementById('update-page');
        const pages = {
            'main-page': mainPage,
            'converter-page': converterPage,
            'update-page': updatePage
        };
        const addFileButton = document.querySelector('.format-button.add-file');
        const convertButton = document.querySelector('.convert-button');
        const fileInfoElement = document.getElementById("file-info");
        const urlParams = new URLSearchParams(window.location.search);

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
        let selectedFile = urlParams.get("file") || null; // –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª –∏–∑ URL –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
        let selectedShop = "Grom Shop"; // –ú–∞–≥–∞–∑–∏–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let selectedFormat = null; // –§–æ—Ä–º–∞—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

        // --- –§—É–Ω–∫—Ü–∏–∏ ---

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Telegram
        function updateTheme() {
            if (!tg.themeParams) {
                console.warn("Theme params not available yet.");
                return;
            }
            const themeParams = tg.themeParams;
            console.log("Applying theme:", themeParams);

            // –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞
            const bgColor = themeParams.bg_color || "#0e0e0e";
            const textColor = themeParams.text_color || "#ffffff";
            const hintColor = themeParams.hint_color || "#4c4c4c";
            const linkColor = themeParams.link_color || "#5c3a91"; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç —Å—Å—ã–ª–æ–∫ –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤
            const buttonColor = themeParams.button_color || "#9755fd";
            const buttonTextColor = themeParams.button_text_color || "#ffffff";
            const secondaryBgColor = themeParams.secondary_bg_color || "#1c1c1c";
            const headerBgColor = themeParams.header_bg_color || secondaryBgColor; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç —Ö–µ–¥–µ—Ä–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
            const sectionBgColor = themeParams.section_bg_color || secondaryBgColor;
            const sectionHeaderTextColor = themeParams.section_header_text_color || hintColor; // –î–ª—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –∏ —Ç.–ø.

            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏
            document.body.style.backgroundColor = bgColor;
            document.body.style.color = textColor;

            // –•–µ–¥–µ—Ä –∏ —Ñ—É—Ç–µ—Ä
            document.querySelector(".header").style.backgroundColor = headerBgColor;
            document.querySelector(".header").style.borderBottomColor = sectionHeaderTextColor;
            document.querySelector(".footer").style.backgroundColor = headerBgColor; // –§—É—Ç–µ—Ä —Ç–æ–∂–µ –∫–∞–∫ —Ö–µ–¥–µ—Ä
            document.querySelector(".footer").style.borderTopColor = sectionHeaderTextColor;

            // –¢–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.querySelector(".user-info .username").style.color = textColor;
            document.querySelector(".user-info .balance").style.color = hintColor;

            // –°–µ–∫—Ü–∏–∏
            document.querySelectorAll('.section').forEach(el => {
                el.style.backgroundColor = sectionBgColor;
                el.style.borderColor = sectionHeaderTextColor;
            });
            document.querySelectorAll('.section-title span').forEach(el => el.style.color = textColor);
            document.querySelectorAll('.section-title-subtext').forEach(el => el.style.color = hintColor);

             // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã
            document.querySelectorAll('.intro-text h2, .tools-section h3').forEach(el => el.style.color = textColor);
            document.querySelectorAll('.intro-text p, .tools-section p').forEach(el => el.style.color = hintColor);

            // –ö–Ω–æ–ø–∫–∏ –æ–±—ã—á–Ω—ã–µ (–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
            document.querySelectorAll('.button, .format-button, .tool-button').forEach(el => {
                if (!el.classList.contains('selected') && !el.classList.contains('add-file') && !el.classList.contains('clear')) {
                    el.style.backgroundColor = secondaryBgColor; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
                    el.style.borderColor = sectionHeaderTextColor;
                    el.style.color = textColor;
                }
                 if (el.classList.contains('tool-button')) {
                     el.querySelector('.divider').style.backgroundColor = sectionHeaderTextColor;
                     el.querySelector('.tool-name').style.color = textColor;
                 }
            });

            // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (Start, Convert, Add File)
            document.querySelectorAll('.start-button, .convert-button, .format-button.add-file').forEach(el => {
                 if (!el.classList.contains('disabled')) {
                    el.style.backgroundColor = buttonColor;
                    el.style.color = buttonTextColor;
                 }
            });

             // –ö–Ω–æ–ø–∫–∞ –û—á–∏—Å—Ç–∏—Ç—å
            document.querySelectorAll('.format-button.clear').forEach(el => {
                el.style.backgroundColor = secondaryBgColor; // –¢–µ–º–Ω–µ–µ
                el.style.borderColor = sectionHeaderTextColor;
                el.style.color = hintColor; // –¢—É—Å–∫–ª—ã–π —Ü–≤–µ—Ç
            });

            // –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.start-button.disabled, .convert-button.disabled, .format-button.add-file.disabled').forEach(el => {
                 el.style.backgroundColor = secondaryBgColor; // –¢—É—Å–∫–ª—ã–π —Ñ–æ–Ω
                 el.style.color = hintColor; // –¢—É—Å–∫–ª—ã–π —Ç–µ–∫—Å—Ç
                 el.style.opacity = '0.6'; // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            });

            // –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–ú–∞–≥–∞–∑–∏–Ω, –§–æ—Ä–º–∞—Ç) - –∏—Å–ø–æ–ª—å–∑—É–µ–º linkColor –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–∞
            document.querySelectorAll('.button.selected, .format-button.selected').forEach(el => {
                 el.style.backgroundColor = secondaryBgColor; // –§–æ–Ω –∫–∞–∫ —É –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
                 el.style.borderColor = linkColor; // –†–∞–º–∫–∞ —Ü–≤–µ—Ç–∞ —Å—Å—ã–ª–∫–∏
                 el.style.color = linkColor; // –¢–µ–∫—Å—Ç —Ü–≤–µ—Ç–∞ —Å—Å—ã–ª–∫–∏
                 el.style.fontWeight = '600';
            });
             // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª—å –¥–ª—è –Ω–µ–≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
            document.querySelectorAll('.button:not(.selected), .format-button:not(.selected)').forEach(el => {
                 el.style.fontWeight = '500';
            });


            // –§—É—Ç–µ—Ä - –∞–∫—Ç–∏–≤–Ω–∞—è –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.footer-btn').forEach(button => {
                const isActive = button.classList.contains('selected');
                const color = isActive ? linkColor : hintColor;
                button.style.color = color;
                button.querySelector("svg").style.fill = color;
            });

             // –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
            document.querySelector('.update-page div').style.color = hintColor;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function showPage(pageId) {
            console.log("Showing page:", pageId);
            Object.values(pages).forEach(page => page.style.display = 'none'); // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            if (pages[pageId]) {
                 pages[pageId].style.display = pageId === 'update-page' ? 'flex' : 'block'; // flex –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è update-page
                 // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ —Ñ—É—Ç–µ—Ä–µ
                 document.querySelectorAll('.footer-btn').forEach(btn => {
                     const isCurrentPage = btn.getAttribute('data-page') === pageId;
                     btn.classList.toggle('selected', isCurrentPage);
                     // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç–∞ —Ñ—É—Ç–µ—Ä–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
                     const color = isCurrentPage ? (tg.themeParams.link_color || "#5c3a91") : (tg.themeParams.hint_color || "#4c4c4c");
                     btn.style.color = color;
                     btn.querySelector("svg").style.fill = color;
                 });
            } else {
                console.error("Page not found:", pageId);
                pages['main-page'].style.display = 'block'; // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
                 // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∏ –≤ —Ñ—É—Ç–µ—Ä–µ –≤—ã–¥–µ–ª–µ–Ω–∞ –≥–ª–∞–≤–Ω–∞—è
                 showPage('main-page'); // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—É—Ç–µ—Ä–∞
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
        function updateConvertButtonState() {
            const canConvert = selectedFile && selectedShop && selectedFormat;
            convertButton.classList.toggle('disabled', !canConvert);
            convertButton.disabled = !canConvert;
            console.log("Convert button state updated. Can convert:", canConvert);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
        function initializeConverterState() {
             // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
            if (selectedFile) {
                fileInfoElement.textContent = `–í—ã–±—Ä–∞–Ω: ${selectedFile}`;
                addFileButton.classList.add('disabled');
                addFileButton.disabled = true;
            } else {
                fileInfoElement.textContent = "–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω";
                addFileButton.classList.remove('disabled');
                addFileButton.disabled = false;
            }

             // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω (Grom Shop –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
             document.querySelectorAll('.button[data-shop]').forEach(button => {
                button.classList.toggle('selected', button.getAttribute('data-shop') === selectedShop);
            });

             // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ (–µ—Å–ª–∏ –æ–Ω –±—ã–ª)
            document.querySelectorAll('.format-options .format-button[data-format]').forEach(button => {
                button.classList.remove('selected');
            });
            selectedFormat = null; // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç —Å–±—Ä–æ—à–µ–Ω

             // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
            updateConvertButtonState();
            console.log("Converter state initialized. File:", selectedFile, "Shop:", selectedShop, "Format:", selectedFormat);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫–∞ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
        function triggerHapticFeedback(style = 'light') {
             if (tg.HapticFeedback && tg.HapticFeedback.impactOccurred) {
                 try {
                    tg.HapticFeedback.impactOccurred(style);
                 } catch (e) {
                     console.warn("Haptic feedback error:", e);
                 }
             }
        }

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π ---

        // 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            const user = tg.initDataUnsafe.user;
            const nickname = user.first_name || user.username || 'User';
            document.querySelector('.user-info .username').textContent = nickname;
            document.querySelector('#welcome-text').textContent = `üëãüèª –ü—Ä–∏–≤–µ—Ç, ${nickname}!`;
            if (user.photo_url) {
                document.querySelector('.user-info .user-avatar').src = user.photo_url;
            }
            console.log("User data loaded:", user);
        } else {
             console.warn("User data not found in initDataUnsafe.");
             document.querySelector('.user-info .username').textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
             document.querySelector('#welcome-text').textContent = `üëãüèª –ü—Ä–∏–≤–µ—Ç!`;
        }

        // 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        updateTheme();
        tg.onEvent("themeChanged", updateTheme);

        // 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
        const initialTab = urlParams.get("tab");
        if (initialTab === "converter" || initialTab === "converter-page") {
             showPage('converter-page');
             initializeConverterState();
        } else {
             showPage('main-page'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        }

        // 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        document.querySelectorAll('.tool-button').forEach(button => {
            button.addEventListener('click', () => {
                triggerHapticFeedback();
                const targetPageId = button.getAttribute('data-page');
                showPage(targetPageId);
                 // –ï—Å–ª–∏ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –µ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                 if (targetPageId === 'converter-page') {
                     initializeConverterState();
                 }
            });
        });

        // 5. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º —Ñ—É—Ç–µ—Ä–∞
        document.querySelectorAll('.footer-btn').forEach(button => {
            button.addEventListener('click', () => {
                triggerHapticFeedback();
                const targetPageId = button.getAttribute('data-page');
                showPage(targetPageId);
                 // –ï—Å–ª–∏ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –µ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                 if (targetPageId === 'converter-page') {
                     initializeConverterState();
                 }
            });
        });

        // 6. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—á–∏—Å—Ç–∏—Ç—å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
        document.querySelector('.format-button.clear').addEventListener('click', () => {
            triggerHapticFeedback('medium');
            fileInfoElement.textContent = "–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω";
            addFileButton.classList.remove('disabled');
            addFileButton.disabled = false;
            selectedFile = null;
            // –û—á–∏—â–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä 'file' –∏–∑ URL –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
            if (history.pushState) {
                const newUrl = window.location.pathname + window.location.search.replace(/([?&])file=[^&]*&?/, '$1').replace(/[?&]$/, '');
                history.pushState({path:newUrl}, '', newUrl);
            }
            console.log("File selection cleared.");
            updateConvertButtonState();
        });

        // 7. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª"
        addFileButton.addEventListener('click', () => {
            if (!addFileButton.classList.contains('disabled')) {
                triggerHapticFeedback();
                console.log("Sending 'upload_pack' request to bot...");
                tg.sendData("upload_pack");
                // –ó–∞–∫—Ä—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –±–æ—Ç –ø—Ä–∏—à–ª–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–æ—Å—å–±–æ–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª
            }
        });

        // 8. –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–∞
        document.querySelectorAll('.button[data-shop]').forEach(button => {
            button.addEventListener('click', () => {
                 triggerHapticFeedback();
                 document.querySelectorAll('.button[data-shop]').forEach(btn => btn.classList.remove('selected'));
                 button.classList.add('selected');
                 selectedShop = button.getAttribute('data-shop');
                 console.log("Shop selected:", selectedShop);
                 updateConvertButtonState();
                 updateTheme(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–µ–º—É, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫
            });
        });

        // 9. –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞
        document.querySelectorAll('.format-options .format-button[data-format]').forEach(button => {
            button.addEventListener('click', () => {
                 triggerHapticFeedback();
                 document.querySelectorAll('.format-options .format-button[data-format]').forEach(btn => btn.classList.remove('selected'));
                 button.classList.add('selected');
                 selectedFormat = button.getAttribute('data-format');
                 console.log("Format selected:", selectedFormat);
                 updateConvertButtonState();
                 updateTheme(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–µ–º—É
            });
        });

        // 10. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å" - –û–¢–ü–†–ê–í–ö–ê JSON
        convertButton.addEventListener('click', () => {
            if (!convertButton.classList.contains('disabled')) {
                triggerHapticFeedback('heavy');
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                const data = {
                    action: "convert",
                    file: selectedFile,
                    shop: selectedShop,
                    format: selectedFormat
                };

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ JSON —Å—Ç—Ä–æ–∫—É
                const dataString = JSON.stringify(data);
                console.log('Sending data (as JSON) to bot:', dataString);

                try {
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
                    tg.sendData(dataString);

                    // –î–∞–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º Web App
                    // –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
                    convertButton.textContent = "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"; // –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                    setTimeout(() => {
                        tg.close();
                    }, 300); // 300 –º—Å –∑–∞–¥–µ—Ä–∂–∫–∞

                } catch (error) {
                    console.error("Error sending data via tg.sendData:", error);
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤–Ω—É—Ç—Ä–∏ WebApp
                    alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É. –û—à–∏–±–∫–∞: " + error.message + ". –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
                    convertButton.textContent = "–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"; // –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ–± –æ—à–∏–±–∫–µ
                     setTimeout(() => { // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è
                        convertButton.textContent = "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å";
                    }, 2000);
                }
            } else {
                console.log("Convert button clicked but is disabled.");
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–µ–≥–∫—É—é –∞–Ω–∏–º–∞—Ü–∏—é –¥—Ä–æ–∂–∞–Ω–∏—è –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
                convertButton.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => convertButton.style.animation = '', 500);
            }
        });

        // –î–æ–±–∞–≤–∏–º —Å—Ç–∏–ª—å –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –¥—Ä–æ–∂–∞–Ω–∏—è
        const styleSheet = document.createElement("style");
        styleSheet.type = "text/css";
        styleSheet.innerText = `
            @keyframes shake {
              0%, 100% { transform: translateX(0); }
              25% { transform: translateX(-3px); }
              50% { transform: translateX(3px); }
              75% { transform: translateX(-3px); }
            }
        `;
        document.head.appendChild(styleSheet);


        // 11. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
        tg.expand();
        console.log("WebApp expanded.");

        // 12. –°–æ–æ–±—â–∞–µ–º –æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
        console.log("WebApp UI fully initialized.");

    </script>
</body>

</html>
