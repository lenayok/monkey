<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monkey Web App</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #0e0e0e;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
        }

        /* –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ö–µ–¥–µ—Ä */
        .header {
            background-color: #1c1c1c;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #2a2a2a;
            transition: background-color 0.3s;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-title img {
            width: 30px;
            height: 30px;
        }

        .header-title h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }

        .user-info .nickname {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .user-info .nickname span {
            font-size: 16px;
            color: #fff;
        }

        .user-info .nickname .balance {
            font-size: 16px;
            color: #323234;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .main-page {
            display: block;
        }

        .intro-text {
            margin-bottom: 16px;
        }

        .intro-text h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .intro-text p {
            font-size: 16px;
            color: #4c4c4c;
            margin-bottom: 16px;
        }

        .section {
            margin-bottom: 16px;
            background-color: #1c1c1c;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #2a2a2a;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .section-title span {
            font-size: 16px;
            font-weight: 500;
        }

        .section-title-subtext {
            font-size: 16px;
            color: #4c4c4c;
            margin-bottom: 10px;
        }

        .start-button {
            background-color: #9755fd;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .tools-section h3 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .tools-section p {
            font-size: 16px;
            color: #4c4c4c;
            margin-bottom: 16px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .tool-button {
            background-color: #1c1c1c;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-align: center;
            min-height: 120px;
        }

        .tool-button .icons {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 60px;
        }

        .tool-button .divider {
            width: 100%;
            height: 1px;
            background-color: #2a2a2a;
            margin: 10px 0;
        }

        .tool-button .tool-name {
            font-size: 14px;
            font-weight: 500;
            padding: 5px 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ */
        .converter-page {
            display: none;
        }

        .converter-page .section-number {
            width: 20px;
            height: 20px;
            background-color: #35274a;
            color: #5c3a91;
            border: 1px solid #5c3a91;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .button {
            background-color: #323234;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .button.selected {
            background-color: #35274a;
            border-color: #5c3a91;
        }

        .button img {
            width: 32px;
            height: 32px;
            border-radius: 8px;
        }

        .button span {
            font-size: 16px;
            font-weight: 500;
            white-space: nowrap;
        }

        .format-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .format-options-row {
            display: flex;
            flex-direction: row;
            gap: 10px;
        }

        .format-button {
            padding: 10px;
            background-color: #323234;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            text-align: center;
            font-size: 16px;
            cursor: pointer;
            color: #fff;
            flex: 1;
        }

        .format-button.clear {
            background-color: #2a2a2c;
            box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .format-button.add-file {
            background-color: #9755fd;
            border: none;
        }

        .format-button.add-file.disabled {
            background-color: #4d3275;
            color: #706d76;
            cursor: not-allowed;
        }

        .format-button.selected {
            background-color: #35274a;
            border-color: #5c3a91;
        }

        .convert-button {
            background-color: #9755fd;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .convert-button.disabled {
            background-color: #4d3275;
            color: #706d76;
            cursor: not-allowed;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" */
        .update-page {
            display: none;
            height: 100%;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 24px;
            color: #4c4c4c;
        }

        /* –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ñ—É—Ç–µ—Ä */
        .footer {
            background-color: #1c1c1c;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            position: sticky;
            bottom: 0;
            z-index: 100;
            border-top: 1px solid #2a2a2a;
            transition: background-color 0.3s;
        }

        .footer-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #4c4c4c;
            cursor: pointer;
            transition: color 0.3s;
        }

        .footer-btn svg {
            fill: #4c4c4c;
            transition: fill 0.3s;
        }

        .footer-btn.selected {
            color: #5c3a91;
        }

        .footer-btn.selected svg {
            fill: #5c3a91;
        }

        .footer-btn span {
            font-size: 12px;
        }
    </style>
</head>

<body>
    <!-- –•–µ–¥–µ—Ä -->
    <header class="header">
        <div class="header-title">
            <img src="https://i.ibb.co/TDZdpLkx/d092776e-b9cf-472a-9373-bd4ea85d76e4.jpg" alt="Monkey Logo">
            <h1>Monkey</h1>
        </div>
        <div class="user-info">
            <div class="nickname">
                <span class="username">Nickname</span>
                <span class="balance">$0</span>
            </div>
            <img src="https://via.placeholder.com/32" alt="User Avatar" class="user-avatar">
        </div>
    </header>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div class="main-page" id="main-page">
            <div class="intro-text">
                <h2 id="welcome-text">üëãüèª –ü—Ä–∏–≤–µ—Ç, username</h2>
                <p>–ó–∞–≥—Ä—É–∑–∏ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã</p>
            </div>

            <section class="section">
                <div class="section-title">
                    <span>ü™Ñ –ú–∞–≥–∏—è –æ—Ç Monkey</span>
                </div>
                <div class="section-title-subtext">–ß–µ–∫–µ—Ä –∏ –∫–æ–¥ —Å –ø–æ—á—Ç—ã –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º</div>
                <button class="start-button">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
            </section>

            <div class="tools-section">
                <h3>üí° –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
                <p>–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π —Ç–µ–±–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</p>
                <div class="tools-grid">
                    <div class="tool-button" data-page="converter-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">üìù –ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">üî¶ –ß–µ–∫–µ—Ä –∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">üé¨ –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–µ–æ</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">ü™Ñ –£–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">‚úâÔ∏è –ö–æ–¥ —Å –ø–æ—á—Ç—ã</div>
                    </div>
                    <div class="tool-button" data-page="update-page">
                        <div class="icons">
                            <!-- –ü—É—Å—Ç–æ, –º–µ—Å—Ç–æ –¥–ª—è —Ñ–æ—Ç–æ -->
                        </div>
                        <div class="divider"></div>
                        <div class="tool-name">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ -->
        <div class="converter-page" id="converter-page">
            <div class="intro-text">
                <h2>üìù –ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä</h2>
                <p>–ó–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞</p>
            </div>

            <section class="section">
                <div class="section-title">
                    <div class="section-number">1</div>
                    <span>–í–∞—à–∏ –∞–∫–∫–∞—É–Ω—Ç—ã</span>
                </div>
                <div class="section-title-subtext" id="file-info">–§–∞–π–ª .txt —Å –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</div>
                <div class="format-options-row">
                    <button class="format-button clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="format-button add-file">–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª</button>
                </div>
            </section>

            <section class="section">
                <div class="section-title">
                    <div class="section-number" style="color: #9755fd;">2</div>
                    <span>–ü–æ—Å—Ç–∞–≤—â–∏–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤</span>
                </div>
                <div class="section-title-subtext">–ì–¥–µ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–ª–∏—Å—å –∞–∫–∫–∞—É–Ω—Ç—ã</div>
                <div class="button-grid">
                    <div class="button" data-shop="Chivap Shop">
                        <img src="https://i.ibb.co/pBx3SxhX/9eeca0f4-7434-4f5c-8a4e-287dceeec8e7.jpg" alt="Chivap">
                        <span>Chivap Shop</span>
                    </div>
                    <div class="button selected" data-shop="Grom Shop">
                        <img src="https://i.ibb.co/sJNc1q7Q/0cf68078-16a5-4851-a0b5-feb5297ac470.jpg" alt="Grom">
                        <span>Grom Shop</span>
                    </div>
                    <div class="button" data-shop="Proliv Shop">
                        <img src="https://i.ibb.co/wZskwNp2/d6c8a7f3-01c8-4f62-aa35-f0072beb4665.jpg" alt="Proliv">
                        <span>Proliv Shop</span>
                    </div>
                    <div class="button" data-shop="Muted Shop">
                        <img src="https://i.ibb.co/4CLYSX0/be105773-907f-44a3-bda1-1d0115d50b3d.jpg" alt="Muted">
                        <span>Muted Shop</span>
                    </div>
                    <div class="button" data-shop="Boom Store">
                        <img src="https://i.ibb.co/Y4dkrsbh/85f727a3-b507-4d54-9d93-751ecb26ddba.jpg" alt="Boom">
                        <span>Boom Store</span>
                    </div>
                    <div class="button" data-shop="Meta Store">
                        <img src="https://i.ibb.co/xtHwB1RS/641c7bb7-fd80-4cde-bf28-00b62aa84cf8.jpg" alt="Meta">
                        <span>Meta Store</span>
                    </div>
                    <div class="button" data-shop="Inferno Shop">
                        <img src="https://i.ibb.co/xtHwB1RS/641c7bb7-fd80-4cde-bf28-00b62aa84cf8.jpg" alt="Inferno">
                        <span>Inferno Shop</span>
                    </div>
                    <div class="button" data-shop="Monkey Shop">
                        <img src="https://i.ibb.co/21SH4XQh/599c5190-3a26-4c31-82c0-6935b28dcd97.jpg" alt="Monkey">
                        <span>Monkey Shop</span>
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="section-title">
                    <div class="section-number" style="color: #9755fd;">3</div>
                    <span>–í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞</span>
                </div>
                <div class="section-title-subtext">–í –∫–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
                <div class="format-options">
                    <button class="format-button" data-format="@username">@username</button>
                    <button class="format-button" data-format="mail:mailpass">mail:mailpass</button>
                    <button class="format-button" data-format="log:pass">log:pass</button>
                    <button class="format-button" data-format="replace_colon_to_pipe">–ó–∞–º–µ–Ω–∞ : –Ω–∞ |</button>
                    <button class="format-button" data-format="replace_pipe_to_colon">–ó–∞–º–µ–Ω–∞ | –Ω–∞ :</button>
                </div>
            </section>

            <button class="convert-button disabled" disabled>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" -->
        <div class="update-page" id="update-page">
            <div>–∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</div>
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <div class="footer-btn selected" data-page="main-page">
            <svg width="28" height="27" viewBox="0 0 28 27">
                <path
                    d="M10.6045 3.41309H6.2054C5.62204 3.41309 5.06258 3.64482 4.65009 4.05732C4.2376 4.46981 4.00586 5.02927 4.00586 5.61262V10.0117M10.6045 3.41309H21.6022C22.1855 3.41309 22.745 3.64482 23.1575 4.05732C23.57 4.46981 23.8017 5.02927 23.8017 5.61262V10.0117M10.6045 3.41309V23.2089M4.00586 10.0117V21.0094C4.00586 21.5927 4.2376 22.1522 4.65009 22.5647C5.06258 22.9772 5.62204 23.2089 6.2054 23.2089H10.6045M4.00586 10.0117H23.8017M23.8017 10.0117V21.0094C23.8017 21.5927 23.57 22.1522 23.1575 22.5647C22.745 22.9772 22.1855 23.2089 21.6022 23.2089H10.6045"
                    stroke="currentColor" stroke-width="1.09977" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="footer-btn" data-page="update-page">
            <svg width="27" height="27" viewBox="0 0 27 27">
                <path
                    d="M18.6929 23.0913V20.8922C18.6929 19.7256 18.2295 18.6069 17.4047 17.7821C16.5799 16.9572 15.4611 16.4938 14.2946 16.4938H5.49794C4.33143 16.4938 3.2127 16.9572 2.38785 17.7821C1.563 18.6069 1.09961 19.7256 1.09961 20.8922V23.0913M25.2904 23.0913V20.8922C25.2897 19.9176 24.9654 18.9709 24.3683 18.2007C23.7712 17.4305 22.9353 16.8804 21.9917 16.6368M17.5934 3.44177C18.5395 3.68401 19.378 4.23424 19.9769 5.00572C20.5757 5.7772 20.9007 6.72604 20.9007 7.70266C20.9007 8.67928 20.5757 9.62812 19.9769 10.3996C19.378 11.1711 18.5395 11.7213 17.5934 11.9635M14.2946 7.69716C14.2946 10.1263 12.3254 12.0955 9.89628 12.0955C7.46714 12.0955 5.49794 10.1263 5.49794 7.69716C5.49794 5.26803 7.46714 3.29883 9.89628 3.29883C12.3254 3.29883 14.2946 5.26803 14.2946 7.69716Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span>–ê–∫–∫–∞—É–Ω—Ç—ã</span>
        </div>
        <div class="footer-btn" data-page="update-page">
            <svg width="27" height="27" viewBox="0 0 27 27">
                <path
                    d="M5.49799 23.0913H20.8922C22.1067 23.0913 23.0913 22.1067 23.0913 20.8922V5.49799C23.0913 4.28343 22.1067 3.29883 20.8922 3.29883H5.49799C4.28343 3.29883 3.29883 4.28343 3.29883 5.49799V20.8922C3.29883 22.1067 4.28343 23.0913 5.49799 23.0913ZM5.49799 23.0913L17.5934 10.9959L23.0913 16.4938M10.9959 9.34654C10.9959 10.2575 10.2575 10.9959 9.34654 10.9959C8.43561 10.9959 7.69716 10.2575 7.69716 9.34654C7.69716 8.43561 8.43561 7.69716 9.34654 7.69716C10.2575 7.69716 10.9959 8.43561 10.9959 9.34654Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        console.log("WebApp initialized:", tg);
        tg.ready();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–º—ã
        function updateTheme() {
            const themeParams = tg.themeParams;
            const header = document.querySelector(".header");
            const footer = document.querySelector(".footer");
            const buttons = document.querySelectorAll(".footer-btn");

            const bgColor = themeParams.bg_color || "#0e0e0e";
            const secondaryBgColor = themeParams.secondary_bg_color || "#1c1c1c";
            const textColor = themeParams.text_color || "#ffffff";
            const hintColor = themeParams.hint_color || "#4c4c4c";

            document.body.style.backgroundColor = bgColor;
            header.style.backgroundColor = secondaryBgColor;
            footer.style.backgroundColor = secondaryBgColor;
            header.style.color = textColor;
            buttons.forEach(button => {
                if (!button.classList.contains("selected")) {
                    button.style.color = hintColor;
                    button.querySelector("svg").style.fill = hintColor;
                }
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe.user;
        if (user) {
            const nickname = user.first_name || user.username || 'User';
            document.querySelector('.user-info .username').textContent = nickname;
            document.querySelector('#welcome-text').textContent = `üëãüèª –ü—Ä–∏–≤–µ—Ç, ${nickname}`;
            if (user.photo_url) {
                document.querySelector('.user-info .user-avatar').src = user.photo_url;
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
        const mainPage = document.getElementById('main-page');
        const converterPage = document.getElementById('converter-page');
        const updatePage = document.getElementById('update-page');

        function showPage(pageToShow) {
            mainPage.style.display = 'none';
            converterPage.style.display = 'none';
            updatePage.style.display = 'none';
            pageToShow.style.display = 'block';
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        document.querySelectorAll('.tool-button').forEach(button => {
            button.addEventListener('click', () => {
                const targetPage = button.getAttribute('data-page');
                if (targetPage === 'converter-page') {
                    showPage(converterPage);
                    // –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω, –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª" –∞–∫—Ç–∏–≤–Ω–∞
                    if (!urlParams.get("file")) {
                        addFileButton.classList.remove('disabled');
                        addFileButton.disabled = false;
                    }
                } else if (targetPage === 'update-page') {
                    showPage(updatePage);
                }
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ—É—Ç–µ—Ä
        document.querySelectorAll('.footer-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.footer-btn').forEach(btn => {
                    btn.classList.remove('selected');
                    btn.style.color = tg.themeParams.hint_color || "#4c4c4c";
                    btn.querySelector("svg").style.fill = tg.themeParams.hint_color || "#4c4c4c";
                });
                button.classList.add('selected');
                button.style.color = "#5c3a91";
                button.querySelector("svg").style.fill = "#5c3a91";
                const targetPage = button.getAttribute('data-page');
                if (targetPage === 'main-page') {
                    showPage(mainPage);
                } else if (targetPage === 'update-page') {
                    showPage(updatePage);
                }
            });
        });

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä tab –≤ URL
        const urlParams = new URLSearchParams(window.location.search);
        const tab = urlParams.get("tab");
        const fileName = urlParams.get("file");
        const addFileButton = document.querySelector('.format-button.add-file');
        const convertButton = document.querySelector('.convert-button');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let selectedFile = fileName || null;
        let selectedShop = "Grom Shop"; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±—Ä–∞–Ω Grom Shop
        let selectedFormat = null;

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –º–æ–∂–Ω–æ –ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
        function updateConvertButtonState() {
            if (selectedFile && selectedShop && selectedFormat) {
                convertButton.classList.remove('disabled');
                convertButton.disabled = false;
            } else {
                convertButton.classList.add('disabled');
                convertButton.disabled = true;
                            }
                        }

                        if (tab === "converter" || tab === "converter-page") {
                            showPage(converterPage);
                            if (fileName) {
                                document.getElementById("file-info").textContent = `–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª: ${fileName}`;
                                addFileButton.classList.add('disabled');
                                addFileButton.disabled = true;
                                updateConvertButtonState();
                            }
                        } else {
                            showPage(mainPage);
                        }

                        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—á–∏—Å—Ç–∏—Ç—å"
                        document.querySelector('.format-button.clear').addEventListener('click', () => {
                            document.getElementById("file-info").textContent = "–§–∞–π–ª .txt —Å –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏";
                            addFileButton.classList.remove('disabled');
                            addFileButton.disabled = false;
                            selectedFile = null;
                            updateConvertButtonState();
                        });

                        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª"
                        addFileButton.addEventListener('click', () => {
                            if (!addFileButton.classList.contains('disabled')) {
                                tg.sendData("upload_pack");
                                setTimeout(() => {
                                    tg.close();
                                }, 500);
                            }
                        });

                        // –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–∞
                        document.querySelectorAll('.button').forEach(button => {
                            button.addEventListener('click', () => {
                                document.querySelectorAll('.button').forEach(btn => btn.classList.remove('selected'));
                                button.classList.add('selected');
                                selectedShop = button.getAttribute('data-shop');
                                updateConvertButtonState();
                            });
                        });

                        // –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞
                        document.querySelectorAll('.format-options .format-button').forEach(button => {
                            button.addEventListener('click', () => {
                                const siblings = button.parentElement.querySelectorAll('.format-button');
                                siblings.forEach(btn => btn.classList.remove('selected'));
                                button.classList.add('selected');
                                selectedFormat = button.getAttribute('data-format');
                                updateConvertButtonState();
                            });
                        });

                        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
                        convertButton.addEventListener('click', () => {
                            if (!convertButton.classList.contains('disabled')) {
                                const data = {
                                    action: "convert",
                                    file: selectedFile,
                                    shop: selectedShop,
                                    format: selectedFormat
                                };

                                console.log('Data to send:', data);

                                // Convert data to query string
                                const queryString = Object.keys(data)
                                    .map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))
                                    .join('&');

                                console.log('Query string:', queryString);

                                tg.sendData(queryString);
                                tg.close();
                            }
                        });

                        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
                        updateTheme();
                        tg.onEvent("themeChanged", updateTheme);

                        // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
                        tg.expand();
                    </script>
                </body>

                </html>
